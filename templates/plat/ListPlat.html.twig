{% extends 'baseBack.html.twig' %}

{% block title %}EnergyBox | Restaurant {% endblock %}

{% block body%}

    <style>
        .agrandir {
            width: 50px;
            height: 100px;
            transition: height 3s ease 200ms, width 3s ease 200ms;
        }

        .agrandir:hover {
            width: 50px;
            height: 200px;
        }
    </style>
<style>
    .btn-narrow {
    padding: .25rem .5rem;
    }
</style>
    <div class="container-fluid">
    <div class="row justify-content-between">
        <div class="col">
            <h1>Liste des Plats</h1>

            <a href="{{ path('app_tri_prixA') }}" class="btn btn-outline-dark btn-sm"><i class="fas fa-sort-amount-up"></i>Trier par prix</a>
            <a href="{{ path('app_tri_prixD') }}" class="btn btn-outline-dark btn-sm"><i class="fas fa-sort-amount-down"></i>Trier par prix</a><br>
            <a href="{{ path('app_tri_nomA') }}" class="btn btn-outline-dark btn-sm"><i class="fas fa-sort-alpha-up"></i>Trier par nom</a>
            <a href="{{ path('app_tri_nomD') }}" class="btn btn-outline-dark btn-sm"><i class="fas fa-sort-alpha-down"></i>Trier par nom</a><br>
            <a href="{{ path('app_tri_nbpA') }}" class="btn btn-outline-dark btn-sm"><i class="fas fa-sort-numeric-up"></i>Trier par nombrePlat</a>
            <a href="{{ path('app_tri_nbpD') }}" class="btn btn-outline-dark btn-sm"><i class="fas fa-sort-numeric-down"></i>Trier par nombrePlat</a><br>
        </div>
        <div class="col-auto">
            <a href="{{ path('app_addplat') }}"  class="btn btn-outline-dark"><i class="fas fa-plus"></i> Ajouter</a>
        </div>
    </div>

                                            <div  class="table-responsive">
                                                <input type="text" id="search" class="form-control" placeholder="Search">
                                                <div id="tabv">
                                                <table  class="table table-striped table-hover mt-3">
                                                    <thead>
                                                    <tr>
                                                        <th>Nom</th>
                                                        <th>Prix</th>
                                                        <th>Description</th>
                                                        <th>Calories</th>
                                                        <th>Etat</th>
                                                        <th>IdUtilisateur</th>
                                                        <th>Categorie</th>
                                                        <th>Nombre</th>
                                                        <th>Image</th>


                                                        <th style="text-align:center;"></th>
                                                        <th style="text-align:center;">Actions</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    {% for i in tabplat %}
                                                    <tr>
                                                        <td>{{ i.nom }}</td>
                                                        <td>{{ i.prix}}</td>
                                                        <td>{{ i.description}}</td>
                                                        <td>{{ i.calories}}</td>
                                                        <td>{{ i.etat}}</td>
                                                        <td>{{ i.UserId}}</td>
                                                        <td>{{ i.categories}}</td>
                                                        <td>{{ i.nbp}}</td>
                                                        {% set img = i.image %}
                                                        <td><img src="{{asset(img)}}" alt="#" class="agrandir" style="width:70000%;"></td>
                                                        <td>


                                                        <td>
                                                            <div class="btn-group" role="group">
                                                                <a href="{{ path('app_updateplat', {'id': i.id}) }}" class="btn btn-secondary"><i class="fas fa-edit"></i> Modifier</a>
                                                                <a href="{{ path('app_removePlat', {'id': i.id}) }}" class="btn btn-danger"><i class="fas fa-trash"></i> Supprimer</a>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    {% else %}
                                                        <tr>
                                                            <td colspan="5">Aucun menu trouv√©.</td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                                </div>
                                            </div>
</div>
{#
    <style>
        #pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }
        .pagination a, .pagination span {
            display: inline-block;
            padding: 5px 10px;
            margin-right: 5px;
            border-radius: 5px;
            text-decoration: none;
            color: #333;
            background-color: #eee;
        }
        .pagination .active {
            background-color: #007bff;
            color: #fff;
        }
    </style>
    <div class="pagination-container" class="fas fa-chevron-circle-right" style="font-size: 18px;">
        {{ knp_pagination_render(tabplat) }}
    </div>
#}

    <script src="{{ asset('https://code.jquery.com/jquery-3.5.1.min.js') }}"></script>
    <script>
        $(document).ready(function() {
            $('#search').on('keyup', function() {
                var query = $(this).val();
                console.log(query);
                $.ajax({
                    url: '{{ path('rechercheAjax') }}',
                    type: 'GET',
                    data: { q: query },
                    success: function(response) {
                        console.log(response);
                        $('#tabv').html($(response).find('#tabv').html());
                        $('#pagination-container').html($(response).find('#pagination-container').html());
                    }
                });
            });
        });

    </script>
{% endblock %}
